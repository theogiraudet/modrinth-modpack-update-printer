name: 'Modrinth Modpack Update Checker'

on:
  schedule:
    - cron: '0 * * * *' # Every hours
  workflow_dispatch: # Allow running the workflow manually

jobs:
  check-updates:
    runs-on: ubuntu-latest
    steps:
      - name: 'Check Modrinth Modpack updates'
        uses: Gunivers/modrinth-modpack-update-checker@dev
        id: check
        with:
          modrinth-modpack-slug: 'exceptionallyoptimized'
      - name: 'Echo all'
        run: |
          echo ${{ steps.check.outputs.is-up-to-date }}
          echo ${{ steps.check.outputs.current-mc-version }}
          echo ${{ steps.check.outputs.tested-mc-version }}
          echo ${{ steps.check.outputs.supported-mods }}
          echo ${{ steps.check.outputs.unsupported-mods }}
          # echo ${{ steps.check.outputs.can-upgrade }}

      - name: 'Print Modrinth Modpack updates'
        uses: theogiraudet/modrinth-modpack-update-printer@main
        if: ${{ steps.check.outputs.is-up-to-date == 'false' }}
        with:
          current-mc-version: ${{ steps.check.outputs.current-mc-version }}
          is-up-to-date: ${{ steps.check.outputs.is-up-to-date }}
          tested-mc-version: ${{ steps.check.outputs.tested-mc-version }}
          supported-mods: ${{ steps.check.outputs.supported-mods }}
          unsupported-mods: ${{ steps.check.outputs.unsupported-mods }}
          can-upgrade: ${{ steps.check.outputs.can-upgrade }}
          person-to-ping: 'theogiraudet'